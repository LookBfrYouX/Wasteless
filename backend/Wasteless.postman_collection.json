{
  "info": {
    "_postman_id": "4ab3b480-6edc-429b-8931-cef0231b17b2",
    "name": "Wasteless",
    "description": "API specification for Team 300's SENG302 2021 project\n\nContact Support:\n Email: seng302@canterbury.ac.nz",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "users",
      "item": [
        {
          "name": "{id}",
          "item": [
            {
              "name": "Retrieve a specific user account",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}"
                  ]
                }
              },
              "response": [
                {
                  "name": "Account retrieved successfully",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n \"firstName\": \"John\",\n \"lastName\": \"Smith\",\n \"email\": \"johnsmith99@gmail.com\",\n \"dateOfBirth\": \"1999-04-27\",\n \"homeAddress\": {\n  \"country\": \"New Zealand\",\n  \"streetNumber\": \"3/24\",\n  \"streetName\": \"Ilam Road\",\n  \"suburb\": \"Upper Riccarton\",\n  \"city\": \"Christchurch\",\n  \"region\": \"Canterbury\",\n  \"postcode\": \"90210\"\n },\n \"id\": 100,\n \"middleName\": \"Hector\",\n \"nickname\": \"Jonny\",\n \"bio\": \"Likes long walks on the beach\",\n \"phoneNumber\": \"+64 3 555 0129\",\n \"created\": \"2020-07-14T14:32:00Z\",\n \"role\": \"defaultGlobalApplicationAdmin\",\n \"businessesAdministered\": [\n  {\n   \"name\": \"Lumbridge General Store\",\n   \"address\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"businessType\": \"Charitable organisation\",\n   \"id\": 100,\n   \"administrators\": [\n    {\n     \"firstName\": \"John\",\n     \"lastName\": \"Smith\",\n     \"email\": \"johnsmith99@gmail.com\",\n     \"dateOfBirth\": \"1999-04-27\",\n     \"homeAddress\": {\n      \"country\": \"New Zealand\",\n      \"streetNumber\": \"3/24\",\n      \"streetName\": \"Ilam Road\",\n      \"suburb\": \"Upper Riccarton\",\n      \"city\": \"Christchurch\",\n      \"region\": \"Canterbury\",\n      \"postcode\": \"90210\"\n     },\n     \"id\": 100,\n     \"middleName\": \"Hector\",\n     \"nickname\": \"Jonny\",\n     \"bio\": \"Likes long walks on the beach\",\n     \"phoneNumber\": \"+64 3 555 0129\",\n     \"created\": \"2020-07-14T14:32:00Z\",\n     \"role\": \"defaultGlobalApplicationAdmin\",\n     \"businessesAdministered\": [\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      },\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      }\n     ]\n    },\n    {\n     \"firstName\": \"John\",\n     \"lastName\": \"Smith\",\n     \"email\": \"johnsmith99@gmail.com\",\n     \"dateOfBirth\": \"1999-04-27\",\n     \"homeAddress\": {\n      \"country\": \"New Zealand\",\n      \"streetNumber\": \"3/24\",\n      \"streetName\": \"Ilam Road\",\n      \"suburb\": \"Upper Riccarton\",\n      \"city\": \"Christchurch\",\n      \"region\": \"Canterbury\",\n      \"postcode\": \"90210\"\n     },\n     \"id\": 100,\n     \"middleName\": \"Hector\",\n     \"nickname\": \"Jonny\",\n     \"bio\": \"Likes long walks on the beach\",\n     \"phoneNumber\": \"+64 3 555 0129\",\n     \"created\": \"2020-07-14T14:32:00Z\",\n     \"role\": \"defaultGlobalApplicationAdmin\",\n     \"businessesAdministered\": [\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      },\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      }\n     ]\n    }\n   ],\n   \"primaryAdministratorId\": 20,\n   \"description\": \"A one-stop shop for all your adventuring needs\",\n   \"created\": \"2020-07-14T14:52:00Z\"\n  },\n  {\n   \"name\": \"Lumbridge General Store\",\n   \"address\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"businessType\": \"Non-profit organisation\",\n   \"id\": 100,\n   \"administrators\": [\n    {\n     \"firstName\": \"John\",\n     \"lastName\": \"Smith\",\n     \"email\": \"johnsmith99@gmail.com\",\n     \"dateOfBirth\": \"1999-04-27\",\n     \"homeAddress\": {\n      \"country\": \"New Zealand\",\n      \"streetNumber\": \"3/24\",\n      \"streetName\": \"Ilam Road\",\n      \"suburb\": \"Upper Riccarton\",\n      \"city\": \"Christchurch\",\n      \"region\": \"Canterbury\",\n      \"postcode\": \"90210\"\n     },\n     \"id\": 100,\n     \"middleName\": \"Hector\",\n     \"nickname\": \"Jonny\",\n     \"bio\": \"Likes long walks on the beach\",\n     \"phoneNumber\": \"+64 3 555 0129\",\n     \"created\": \"2020-07-14T14:32:00Z\",\n     \"role\": \"defaultGlobalApplicationAdmin\",\n     \"businessesAdministered\": [\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      },\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      }\n     ]\n    },\n    {\n     \"firstName\": \"John\",\n     \"lastName\": \"Smith\",\n     \"email\": \"johnsmith99@gmail.com\",\n     \"dateOfBirth\": \"1999-04-27\",\n     \"homeAddress\": {\n      \"country\": \"New Zealand\",\n      \"streetNumber\": \"3/24\",\n      \"streetName\": \"Ilam Road\",\n      \"suburb\": \"Upper Riccarton\",\n      \"city\": \"Christchurch\",\n      \"region\": \"Canterbury\",\n      \"postcode\": \"90210\"\n     },\n     \"id\": 100,\n     \"middleName\": \"Hector\",\n     \"nickname\": \"Jonny\",\n     \"bio\": \"Likes long walks on the beach\",\n     \"phoneNumber\": \"+64 3 555 0129\",\n     \"created\": \"2020-07-14T14:32:00Z\",\n     \"role\": \"defaultGlobalApplicationAdmin\",\n     \"businessesAdministered\": [\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      },\n      {\n       \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n      }\n     ]\n    }\n   ],\n   \"primaryAdministratorId\": 20,\n   \"description\": \"A one-stop shop for all your adventuring needs\",\n   \"created\": \"2020-07-14T14:52:00Z\"\n  }\n ]\n}"
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Promote a user account to the Global Application Admin role",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/makeadmin",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "makeadmin"
                  ]
                }
              },
              "response": [
                {
                  "name": "Action completed successfully",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/makeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "makeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/makeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "makeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The user does not have permission to perform the requested action",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/makeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "makeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/makeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "makeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Revokes the Global Application Admin role from a user account",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/revokeadmin",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "revokeadmin"
                  ]
                }
              },
              "response": [
                {
                  "name": "Action completed successfully",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/revokeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "revokeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/revokeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "revokeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The user does not have permission to perform the requested action",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/revokeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "revokeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/revokeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "revokeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Returned when the DGAA tries to revoke their own admin status, this is not an allowed action.",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/revokeadmin",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "revokeadmin"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Conflict",
                  "code": 409,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Retrieve all active cards that a user has created",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/users/{{userId}}/cards",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "{{userId}}",
                    "cards"
                  ]
                }
              },
              "response": [
                {
                  "name": "Request successful, a (possibly empty) list of cards is returned",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/cards",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "cards"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "[\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"defaultGlobalApplicationAdmin\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n },\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"user\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n }\n]"
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/cards",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "cards"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/cards",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "cards"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/users/:id/cards",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "users",
                        ":id",
                        "cards"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            }
          ]
        },
        {
          "name": "Create a new user account",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Smith\",\n    \"email\": \"johnsmith99@gmail.com\",\n    \"dateOfBirth\": \"1999-04-27\",\n    \"homeAddress\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"password\": \"1337-H%nt3r2\",\n    \"middleName\": \"Hector\",\n    \"nickname\": \"Jonny\",\n    \"bio\": \"Likes long walks on the beach\",\n    \"phoneNumber\": \"+64 3 555 0129\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users"
              ]
            }
          },
          "response": [
            {
              "name": "Response returned to client when they have performed an action to gain authentication (registering or logging in). This response includes a session token that the client can use in future API requests to authenticate itself.  This session token is set as ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Smith\",\n    \"email\": \"johnsmith99@gmail.com\",\n    \"dateOfBirth\": \"1999-04-27\",\n    \"homeAddress\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"password\": \"1337-H%nt3r2\",\n    \"middleName\": \"Hector\",\n    \"nickname\": \"Jonny\",\n    \"bio\": \"Likes long walks on the beach\",\n    \"phoneNumber\": \"+64 3 555 0129\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Set-Cookie",
                  "value": "JSESSIONID=abcde12345; Path=/; HttpOnly",
                  "description": ""
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"userId\": 100\n}"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Smith\",\n    \"email\": \"johnsmith99@gmail.com\",\n    \"dateOfBirth\": \"1999-04-27\",\n    \"homeAddress\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"password\": \"1337-H%nt3r2\",\n    \"middleName\": \"Hector\",\n    \"nickname\": \"Jonny\",\n    \"bio\": \"Likes long walks on the beach\",\n    \"phoneNumber\": \"+64 3 555 0129\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Email address already in use",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"firstName\": \"John\",\n    \"lastName\": \"Smith\",\n    \"email\": \"johnsmith99@gmail.com\",\n    \"dateOfBirth\": \"1999-04-27\",\n    \"homeAddress\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"password\": \"1337-H%nt3r2\",\n    \"middleName\": \"Hector\",\n    \"nickname\": \"Jonny\",\n    \"bio\": \"Likes long walks on the beach\",\n    \"phoneNumber\": \"+64 3 555 0129\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/users",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users"
                  ]
                }
              },
              "status": "Conflict",
              "code": 409,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Attempt to authenticate a user account with a username and password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"userId\", jsonData.userId);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"johnsmith99@gmail.com\",\n    \"password\": \"1337-H%nt3r2\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "login"
              ]
            }
          },
          "response": [
            {
              "name": "Response returned to client when they have performed an action to gain authentication (registering or logging in). This response includes a session token that the client can use in future API requests to authenticate itself.  This session token is set as ",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"email\": \"johnsmith99@gmail.com\",\n    \"password\": \"1337-H%nt3r2\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "login"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Set-Cookie",
                  "value": "JSESSIONID=abcde12345; Path=/; HttpOnly",
                  "description": ""
                },
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"userId\": 100\n}"
            },
            {
              "name": "Failed login attempt, email or password incorrect",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"email\": \"johnsmith99@gmail.com\",\n    \"password\": \"1337-H%nt3r2\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/login",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "login"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Login (Dawson)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "pm.environment.set(\"userId\", jsonData.userId);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"dnb36@uclive.ac.nz\",\n    \"password\": \"fun123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/login",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "login"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Search for users by some criteria, for now: their name",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var _ = require('lodash');",
                  "",
                  "var jsonData = pm.response.json();",
                  "",
                  "",
                  "// Test status code",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "",
                  "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                  "pm.test(\"'totalCount' returns a valid number\", function () {",
                  "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                  "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length-1);",
                  "});",
                  "",
                  "",
                  "// Test the size of results match pagination indexes",
                  "pm.test(\"Pagination indices return valid results\", function () {",
                  "    pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                  "    // If start index is null then simplify it to zero",
                  "    pagStartIndex = !pagStartIndex ? 0 : pagStartIndex;",
                  "    pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                  "    resLength = jsonData.results.length;",
                  "    totalCount = Number(jsonData.totalCount);",
                  "",
                  "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                  "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                  "    } else {",
                  "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                  "    }",
                  "});",
                  "",
                  "",
                  "// Test the response schema is correct",
                  "var schema = {",
                  "    \"properties\": {",
                  "        \"results\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "                \"type\": \"object\"",
                  "            }",
                  "        },",
                  "        \"totalCount\": {",
                  "            \"type\": \"number\"",
                  "        }",
                  "    },",
                  "    \"required\": [\"results\", \"totalCount\"]",
                  "};",
                  "",
                  "pm.test('Response body is in expected schema', function () {",
                  "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                  "});",
                  "",
                  "",
                  "",
                  "// Increment the test index value, used to cycle through query params",
                  "utils.incrementTestIndex(p.environment);",
                  "",
                  "sortBy = pm.environment.get(\"sortBy\");",
                  "// Match the lodash format (asc/desc)",
                  "isAscending = pm.environment.get(\"isAscending\") == \"yes\" ? \"asc\" : \"desc\";",
                  "",
                  "pm.test('User ' + sortBy + 's are in ' + isAscending + ' sorted order', () => {",
                  "   // Using the orderBy function from lodash ",
                  "   // Read docs: https://lodash.com/docs/4.17.10#orderBy",
                  "",
                  "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                  "    var expectedSortedOrder = _.orderBy(jsonData.results, [( o ) => { return o[sortBy] || ''}],[isAscending]);",
                  "",
                  "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var index = utils.getTestIndex(pm.environment);  // getting the current index value",
                  "",
                  "// List the possible values to cycle through",
                  "sortByValues = [\"firstName\", \"middleName\", \"lastName\", \"nickname\"];",
                  "isAscendingValues = [\"yes\", \"no\"];",
                  "pagIndexValues = [[0, \"\"], [0, 1], [2, 5]]  // In (start, end) format where `start` is pagStartIndex",
                  "",
                  "// Set the values as env vars, used as query params",
                  "sortByIndex = (Math.floor(index / 2)) % sortByValues.length;",
                  "isAscendingIndex = index % isAscendingValues.length;",
                  "pagIndexIndex = index % pagIndexValues.length;",
                  "pm.environment.set(\"sortBy\", sortByValues[sortByIndex]);",
                  "pm.environment.set(\"isAscending\", isAscendingValues[isAscendingIndex]);",
                  "pm.environment.set(\"pagStartIndex\", pagIndexValues[pagIndexIndex][0]);",
                  "pm.environment.set(\"pagEndIndex\", pagIndexValues[pagIndexIndex][1]);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/search?searchQuery={{searchQuery}}&sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "users",
                "search"
              ],
              "query": [
                {
                  "key": "searchQuery",
                  "value": "{{searchQuery}}",
                  "description": "(Required) Criteria to search users for, e.g: users full name or one or more of their names/nickname"
                },
                {
                  "key": "sortBy",
                  "value": "{{sortBy}}"
                },
                {
                  "key": "isAscending",
                  "value": "{{isAscending}}"
                },
                {
                  "key": "pagStartIndex",
                  "value": "{{pagStartIndex}}"
                },
                {
                  "key": "pagEndIndex",
                  "value": "{{pagEndIndex}}"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Request successful, a (possibly empty) list of users is returned",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/search?searchQuery=Duis",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "searchQuery",
                      "value": "Duis"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n {\n  \"firstName\": \"John\",\n  \"lastName\": \"Smith\",\n  \"email\": \"johnsmith99@gmail.com\",\n  \"dateOfBirth\": \"1999-04-27\",\n  \"homeAddress\": {\n   \"country\": \"New Zealand\",\n   \"streetNumber\": \"3/24\",\n   \"streetName\": \"Ilam Road\",\n   \"suburb\": \"Upper Riccarton\",\n   \"city\": \"Christchurch\",\n   \"region\": \"Canterbury\",\n   \"postcode\": \"90210\"\n  },\n  \"id\": 100,\n  \"middleName\": \"Hector\",\n  \"nickname\": \"Jonny\",\n  \"bio\": \"Likes long walks on the beach\",\n  \"phoneNumber\": \"+64 3 555 0129\",\n  \"created\": \"2020-07-14T14:32:00Z\",\n  \"role\": \"globalApplicationAdmin\",\n  \"businessesAdministered\": [\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   },\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   }\n  ]\n },\n {\n  \"firstName\": \"John\",\n  \"lastName\": \"Smith\",\n  \"email\": \"johnsmith99@gmail.com\",\n  \"dateOfBirth\": \"1999-04-27\",\n  \"homeAddress\": {\n   \"country\": \"New Zealand\",\n   \"streetNumber\": \"3/24\",\n   \"streetName\": \"Ilam Road\",\n   \"suburb\": \"Upper Riccarton\",\n   \"city\": \"Christchurch\",\n   \"region\": \"Canterbury\",\n   \"postcode\": \"90210\"\n  },\n  \"id\": 100,\n  \"middleName\": \"Hector\",\n  \"nickname\": \"Jonny\",\n  \"bio\": \"Likes long walks on the beach\",\n  \"phoneNumber\": \"+64 3 555 0129\",\n  \"created\": \"2020-07-14T14:32:00Z\",\n  \"role\": \"globalApplicationAdmin\",\n  \"businessesAdministered\": [\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   },\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   }\n  ]\n }\n]"
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/users/search?searchQuery=Duis",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "searchQuery",
                      "value": "Duis"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        }
      ]
    },
    {
      "name": "businesses",
      "item": [
        {
          "name": "products",
          "item": [
            {
              "name": "images",
              "item": [
                {
                  "name": "{image Id}",
                  "item": [
                    {
                      "name": "Delete an image of a product",
                      "request": {
                        "auth": {
                          "type": "apikey",
                          "apikey": [
                            {
                              "key": "key",
                              "value": "JSESSIONID",
                              "type": "string"
                            },
                            {
                              "key": "value",
                              "value": true,
                              "type": "boolean"
                            },
                            {
                              "key": "in",
                              "value": "header",
                              "type": "string"
                            }
                          ]
                        },
                        "method": "DELETE",
                        "header": [],
                        "url": {
                          "raw": "{{baseUrl}}/businesses/{{businessId}}/products/:productId/images/:imageId",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            "{{businessId}}",
                            "products",
                            ":productId",
                            "images",
                            ":imageId"
                          ],
                          "variable": [
                            {
                              "key": "productId",
                              "value": "Duis",
                              "description": "(Required) ID (Product Code) of product to delete image for"
                            },
                            {
                              "key": "imageId",
                              "value": "12684656",
                              "description": "(Required) ID of the image to delete"
                            }
                          ]
                        }
                      },
                      "response": [
                        {
                          "name": "Image deleted successfully",
                          "originalRequest": {
                            "method": "DELETE",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "Access token is missing or invalid",
                          "originalRequest": {
                            "method": "DELETE",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Unauthorized",
                          "code": 401,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "Forbidden: Returned when a user tries to delete an image for a product that it is in a catalogue for a business they do not administer AND the user is not a global application admin",
                          "originalRequest": {
                            "method": "DELETE",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Forbidden",
                          "code": 403,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                          "originalRequest": {
                            "method": "DELETE",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Not Acceptable",
                          "code": 406,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        }
                      ]
                    },
                    {
                      "name": "Set an existing image to be the new primary image for some product",
                      "request": {
                        "auth": {
                          "type": "apikey",
                          "apikey": [
                            {
                              "key": "key",
                              "value": "JSESSIONID",
                              "type": "string"
                            },
                            {
                              "key": "value",
                              "value": true,
                              "type": "boolean"
                            },
                            {
                              "key": "in",
                              "value": "header",
                              "type": "string"
                            }
                          ]
                        },
                        "method": "PUT",
                        "header": [],
                        "url": {
                          "raw": "{{baseUrl}}/businesses/{{businessId}}/products/:productId/images/:imageId/makeprimary",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            "{{businessId}}",
                            "products",
                            ":productId",
                            "images",
                            ":imageId",
                            "makeprimary"
                          ],
                          "variable": [
                            {
                              "key": "productId",
                              "value": "Duis",
                              "description": "(Required) ID (Product Code) of product to update primary image for"
                            },
                            {
                              "key": "imageId",
                              "value": "12684656",
                              "description": "(Required) ID of the image to set as being the primary image for product"
                            }
                          ]
                        }
                      },
                      "response": [
                        {
                          "name": "Primary image successfully updated",
                          "originalRequest": {
                            "method": "PUT",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId/makeprimary",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId",
                                "makeprimary"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "OK",
                          "code": 200,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "Access token is missing or invalid",
                          "originalRequest": {
                            "method": "PUT",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId/makeprimary",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId",
                                "makeprimary"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Unauthorized",
                          "code": 401,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "Forbidden: Returned when a user tries to update the primary image for a product that it is in a catalogue for a business they do not administer AND the user is not a global application admin",
                          "originalRequest": {
                            "method": "PUT",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId/makeprimary",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId",
                                "makeprimary"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Forbidden",
                          "code": 403,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        },
                        {
                          "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                          "originalRequest": {
                            "method": "PUT",
                            "header": [
                              {
                                "description": "Added as a part of security scheme: apikey",
                                "key": "JSESSIONID",
                                "value": "<API Key>"
                              }
                            ],
                            "url": {
                              "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images/:imageId/makeprimary",
                              "host": [
                                "{{baseUrl}}"
                              ],
                              "path": [
                                "businesses",
                                ":businessId",
                                "products",
                                ":productId",
                                "images",
                                ":imageId",
                                "makeprimary"
                              ],
                              "variable": [
                                {
                                  "key": "businessId"
                                },
                                {
                                  "key": "productId"
                                },
                                {
                                  "key": "imageId"
                                }
                              ]
                            }
                          },
                          "status": "Not Acceptable",
                          "code": 406,
                          "_postman_previewlanguage": "text",
                          "header": [
                            {
                              "key": "Content-Type",
                              "value": "text/plain"
                            }
                          ],
                          "cookie": [],
                          "body": ""
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "Upload a new image for some photo",
                  "request": {
                    "auth": {
                      "type": "apikey",
                      "apikey": [
                        {
                          "key": "key",
                          "value": "JSESSIONID",
                          "type": "string"
                        },
                        {
                          "key": "value",
                          "value": true,
                          "type": "boolean"
                        },
                        {
                          "key": "in",
                          "value": "header",
                          "type": "string"
                        }
                      ]
                    },
                    "method": "POST",
                    "header": [
                      {
                        "key": "Content-Type",
                        "value": "multipart/form-data"
                      }
                    ],
                    "body": {
                      "mode": "formdata",
                      "formdata": [
                        {
                          "key": "filename",
                          "value": "[\"cupidatat\",\"fugiat do aute\"]",
                          "type": "text"
                        }
                      ]
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/{{businessId}}/products/:productId/images",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        "{{businessId}}",
                        "products",
                        ":productId",
                        "images"
                      ],
                      "variable": [
                        {
                          "key": "productId",
                          "value": "Duis",
                          "description": "(Required) ID (Product Code) of product to try to find in catalogue"
                        }
                      ]
                    }
                  },
                  "response": [
                    {
                      "name": "Image created successfully",
                      "originalRequest": {
                        "method": "POST",
                        "header": [
                          {
                            "description": "Added as a part of security scheme: apikey",
                            "key": "JSESSIONID",
                            "value": "<API Key>"
                          }
                        ],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "filename",
                              "value": "[\"in\",\"nostrud ad exercitation\"]",
                              "type": "text"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            ":businessId",
                            "products",
                            ":productId",
                            "images"
                          ],
                          "variable": [
                            {
                              "key": "businessId"
                            },
                            {
                              "key": "productId"
                            }
                          ]
                        }
                      },
                      "status": "Created",
                      "code": 201,
                      "_postman_previewlanguage": "json",
                      "header": [
                        {
                          "key": "Content-Type",
                          "value": "application/json"
                        }
                      ],
                      "cookie": [],
                      "body": "{\n \"imageId\": 1234\n}"
                    },
                    {
                      "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                      "originalRequest": {
                        "method": "POST",
                        "header": [
                          {
                            "description": "Added as a part of security scheme: apikey",
                            "key": "JSESSIONID",
                            "value": "<API Key>"
                          }
                        ],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "filename",
                              "value": "[\"in\",\"nostrud ad exercitation\"]",
                              "type": "text"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            ":businessId",
                            "products",
                            ":productId",
                            "images"
                          ],
                          "variable": [
                            {
                              "key": "businessId"
                            },
                            {
                              "key": "productId"
                            }
                          ]
                        }
                      },
                      "status": "Bad Request",
                      "code": 400,
                      "_postman_previewlanguage": "text",
                      "header": [
                        {
                          "key": "Content-Type",
                          "value": "text/plain"
                        }
                      ],
                      "cookie": [],
                      "body": ""
                    },
                    {
                      "name": "Access token is missing or invalid",
                      "originalRequest": {
                        "method": "POST",
                        "header": [
                          {
                            "description": "Added as a part of security scheme: apikey",
                            "key": "JSESSIONID",
                            "value": "<API Key>"
                          }
                        ],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "filename",
                              "value": "[\"in\",\"nostrud ad exercitation\"]",
                              "type": "text"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            ":businessId",
                            "products",
                            ":productId",
                            "images"
                          ],
                          "variable": [
                            {
                              "key": "businessId"
                            },
                            {
                              "key": "productId"
                            }
                          ]
                        }
                      },
                      "status": "Unauthorized",
                      "code": 401,
                      "_postman_previewlanguage": "text",
                      "header": [
                        {
                          "key": "Content-Type",
                          "value": "text/plain"
                        }
                      ],
                      "cookie": [],
                      "body": ""
                    },
                    {
                      "name": "Forbidden: Returned when a user tries to add an image for a product that it is in a catalogue for a business they do not administer AND the user is not a global application admin",
                      "originalRequest": {
                        "method": "POST",
                        "header": [
                          {
                            "description": "Added as a part of security scheme: apikey",
                            "key": "JSESSIONID",
                            "value": "<API Key>"
                          }
                        ],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "filename",
                              "value": "[\"in\",\"nostrud ad exercitation\"]",
                              "type": "text"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            ":businessId",
                            "products",
                            ":productId",
                            "images"
                          ],
                          "variable": [
                            {
                              "key": "businessId"
                            },
                            {
                              "key": "productId"
                            }
                          ]
                        }
                      },
                      "status": "Forbidden",
                      "code": 403,
                      "_postman_previewlanguage": "text",
                      "header": [
                        {
                          "key": "Content-Type",
                          "value": "text/plain"
                        }
                      ],
                      "cookie": [],
                      "body": ""
                    },
                    {
                      "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                      "originalRequest": {
                        "method": "POST",
                        "header": [
                          {
                            "description": "Added as a part of security scheme: apikey",
                            "key": "JSESSIONID",
                            "value": "<API Key>"
                          }
                        ],
                        "body": {
                          "mode": "formdata",
                          "formdata": [
                            {
                              "key": "filename",
                              "value": "[\"in\",\"nostrud ad exercitation\"]",
                              "type": "text"
                            }
                          ]
                        },
                        "url": {
                          "raw": "{{baseUrl}}/businesses/:businessId/products/:productId/images",
                          "host": [
                            "{{baseUrl}}"
                          ],
                          "path": [
                            "businesses",
                            ":businessId",
                            "products",
                            ":productId",
                            "images"
                          ],
                          "variable": [
                            {
                              "key": "businessId"
                            },
                            {
                              "key": "productId"
                            }
                          ]
                        }
                      },
                      "status": "Not Acceptable",
                      "code": 406,
                      "_postman_previewlanguage": "text",
                      "header": [
                        {
                          "key": "Content-Type",
                          "value": "text/plain"
                        }
                      ],
                      "cookie": [],
                      "body": ""
                    }
                  ]
                }
              ]
            },
            {
              "name": "Retrieve all the products in a business's catalogue",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "var index = utils.getTestIndex(pm.environment);  // getting the current index value",
                      "",
                      "// List the possible values to cycle through",
                      "sortByValues = [\"name\", \"manufacturer\", \"recommendedRetailPrice\", \"created\"];",
                      "isAscendingValues = [\"yes\", \"no\"];",
                      "pagIndexValues = [[0, \"\"], [0, 1], [2, 5]]  // In (start, end) format where `start` is pagStartIndex",
                      "",
                      "// Set the values as env vars, used as query params",
                      "sortByIndex = (Math.floor(index / 2)) % sortByValues.length;",
                      "isAscendingIndex = index % isAscendingValues.length;",
                      "pagIndexIndex = index % pagIndexValues.length;",
                      "pm.environment.set(\"sortBy\", sortByValues[sortByIndex]);",
                      "pm.environment.set(\"isAscending\", isAscendingValues[isAscendingIndex]);",
                      "pm.environment.set(\"pagStartIndex\", pagIndexValues[pagIndexIndex][0]);",
                      "pm.environment.set(\"pagEndIndex\", pagIndexValues[pagIndexIndex][1]);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var _ = require('lodash');",
                      "",
                      "var jsonData = pm.response.json();",
                      "",
                      "// Increment the test index value, used to cycle through query params",
                      "utils.incrementTestIndex(p.environment);",
                      "",
                      "",
                      "// Test status code",
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "",
                      "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                      "pm.test(\"'totalCount' returns a valid number\", function () {",
                      "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                      "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length-1);",
                      "});",
                      "",
                      "",
                      "// Test the size of results match pagination indexes",
                      "pm.test(\"Pagination indices return valid results\", function () {",
                      "    pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                      "    // If start index is null then simplify it to zero",
                      "    pagStartIndex = !pagStartIndex ? 0 : pagStartIndex;",
                      "    pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                      "    resLength = jsonData.results.length;",
                      "    totalCount = Number(jsonData.totalCount);",
                      "",
                      "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                      "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                      "    } else {",
                      "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                      "    }",
                      "});",
                      "",
                      "",
                      "// Test the response schema is correct",
                      "var schema = {",
                      "    \"properties\": {",
                      "        \"results\": {",
                      "            \"type\": \"array\",",
                      "            \"items\": {",
                      "                \"type\": \"object\"",
                      "            }",
                      "        },",
                      "        \"totalCount\": {",
                      "            \"type\": \"number\"",
                      "        }",
                      "    },",
                      "    \"required\": [\"results\", \"totalCount\"]",
                      "};",
                      "",
                      "pm.test('Response body is in expected schema', function () {",
                      "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                      "});",
                      "",
                      "",
                      "",
                      "sortBy = pm.environment.get(\"sortBy\");",
                      "// Match the lodash format (asc/desc)",
                      "isAscending = pm.environment.get(\"isAscending\") == \"yes\" ? \"asc\" : \"desc\";",
                      "",
                      "pm.test('Product ' + sortBy + 's are in ' + isAscending + ' sorted order', () => {",
                      "   // Using the orderBy function from lodash ",
                      "   // Read docs: https://lodash.com/docs/4.17.10#orderBy",
                      "",
                      "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                      "    var expectedSortedOrder = _.orderBy(jsonData.results, [( o ) => { return o[sortBy] || ''}], [isAscending]);",
                      "    console.log(expectedSortedOrder)",
                      "    console.log(jsonData.results)",
                      "",
                      "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/products?sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "products"
                  ],
                  "query": [
                    {
                      "key": "sortBy",
                      "value": "{{sortBy}}"
                    },
                    {
                      "key": "isAscending",
                      "value": "{{isAscending}}"
                    },
                    {
                      "key": "pagStartIndex",
                      "value": "{{pagStartIndex}}"
                    },
                    {
                      "key": "pagEndIndex",
                      "value": "{{pagEndIndex}}"
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Catalogue retrieved successfully. This could be an empty array.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "[\n {\n  \"name\": \"Watties Baked Beans - 420g can\",\n  \"id\": \"WATT-420-BEANS\",\n  \"description\": \"Baked Beans as they should be.\",\n  \"manufacturer\": \"Heinz Wattie's Limited\",\n  \"recommendedRetailPrice\": 2.2,\n  \"created\": \"1998-12-26T14:55:47.416Z\",\n  \"images\": [\n   {\n    \"filename\": \"/media/images/23987192387509-123908794328.png\",\n    \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n    \"id\": 1234\n   },\n   {\n    \"filename\": \"/media/images/23987192387509-123908794328.png\",\n    \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n    \"id\": 1234\n   }\n  ]\n },\n {\n  \"name\": \"Watties Baked Beans - 420g can\",\n  \"id\": \"WATT-420-BEANS\",\n  \"description\": \"Baked Beans as they should be.\",\n  \"manufacturer\": \"Heinz Wattie's Limited\",\n  \"recommendedRetailPrice\": 2.2,\n  \"created\": \"1992-03-25T20:54:43.525Z\",\n  \"images\": [\n   {\n    \"filename\": \"/media/images/23987192387509-123908794328.png\",\n    \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n    \"id\": 1234\n   },\n   {\n    \"filename\": \"/media/images/23987192387509-123908794328.png\",\n    \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n    \"id\": 1234\n   }\n  ]\n }\n]"
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The account performing the request is neither an administrator of the business, nor a global application admin.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Add a new product to a business's catalogue",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/products",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "products"
                  ]
                }
              },
              "response": [
                {
                  "name": "Product created successfully",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Created",
                  "code": 201,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n \"productId\": \"WATT-420-BEANS\"\n}"
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Forbidden: Returned when a user tries to add a product to business they do not administer AND the user is not a global application admin",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/products",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "products"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Modify an existing catalogue item",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/products/:productId",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "products",
                    ":productId"
                  ],
                  "variable": [
                    {
                      "key": "productId",
                      "value": "Duis",
                      "description": "(Required) ID (Product Code) of product to try to find in catalogue"
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Product updated successfully",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/products/:productId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "products",
                        ":productId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "productId"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/products/:productId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "products",
                        ":productId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "productId"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Forbidden: Returned when a user tries to update a product for a business they do not administer AND the user is not a global application admin",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/products/:productId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "products",
                        ":productId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "productId"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            }
          ]
        },
        {
          "name": "inventory",
          "item": [
            {
              "name": "Retrieve a business's product inventory",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "var index = utils.getTestIndex(pm.environment);  // getting the current index value",
                      "",
                      "// List the possible values to cycle through",
                      "sortByValues = [\"quantity\", \"pricePerItem\", \"totalPrice\", \"manufactured\", \"sellBy\", \"bestBefore\"];",
                      "isAscendingValues = [\"yes\", \"no\"];",
                      "pagIndexValues = [[0, \"\"], [0, 1], [2, 5]]  // In (start, end) format where `start` is pagStartIndex",
                      "",
                      "// Set the values as env vars, used as query params",
                      "sortByIndex = (Math.floor(index / 2)) % sortByValues.length;",
                      "isAscendingIndex = index % isAscendingValues.length;",
                      "pagIndexIndex = index % pagIndexValues.length;",
                      "pm.environment.set(\"sortBy\", sortByValues[sortByIndex]);",
                      "pm.environment.set(\"isAscending\", isAscendingValues[isAscendingIndex]);",
                      "pm.environment.set(\"pagStartIndex\", pagIndexValues[pagIndexIndex][0]);",
                      "pm.environment.set(\"pagEndIndex\", pagIndexValues[pagIndexIndex][1]);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var _ = require('lodash');",
                      "",
                      "var jsonData = pm.response.json();",
                      "",
                      "",
                      "// Test status code",
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "",
                      "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                      "pm.test(\"'totalCount' returns a valid number\", function () {",
                      "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                      "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length-1);",
                      "});",
                      "",
                      "",
                      "// Test the size of results match pagination indexes",
                      "pm.test(\"Pagination indices return valid results\", function () {",
                      "    pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                      "    // If start index is null then simplify it to zero",
                      "    pagStartIndex = !pagStartIndex ? 0 : pagStartIndex;",
                      "    pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                      "    resLength = jsonData.results.length;",
                      "    totalCount = Number(jsonData.totalCount);",
                      "",
                      "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                      "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                      "    } else {",
                      "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                      "    }",
                      "});",
                      "",
                      "",
                      "// Test the response schema is correct",
                      "var schema = {",
                      "    \"properties\": {",
                      "        \"results\": {",
                      "            \"type\": \"array\",",
                      "            \"items\": {",
                      "                \"type\": \"object\"",
                      "            }",
                      "        },",
                      "        \"totalCount\": {",
                      "            \"type\": \"number\"",
                      "        }",
                      "    },",
                      "    \"required\": [\"results\", \"totalCount\"]",
                      "};",
                      "",
                      "pm.test('Response body is in expected schema', function () {",
                      "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                      "});",
                      "",
                      "",
                      "",
                      "// Increment the test index value, used to cycle through query params",
                      "utils.incrementTestIndex(p.environment);",
                      "",
                      "sortBy = pm.environment.get(\"sortBy\");",
                      "// Match the lodash format (asc/desc)",
                      "isAscending = pm.environment.get(\"isAscending\") == \"yes\" ? \"asc\" : \"desc\";",
                      "",
                      "pm.test('Inventory ' + sortBy + 's are in ' + isAscending + ' sorted order', () => {",
                      "   // Using the orderBy function from lodash ",
                      "   // Read docs: https://lodash.com/docs/4.17.10#orderBy",
                      "",
                      "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                      "    var expectedSortedOrder = _.orderBy(jsonData.results, [( o ) => { return o[sortBy] || ''}],[isAscending]);",
                      "",
                      "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/inventory/?sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "inventory",
                    ""
                  ],
                  "query": [
                    {
                      "key": "sortBy",
                      "value": "{{sortBy}}"
                    },
                    {
                      "key": "isAscending",
                      "value": "{{isAscending}}"
                    },
                    {
                      "key": "pagStartIndex",
                      "value": "{{pagStartIndex}}"
                    },
                    {
                      "key": "pagEndIndex",
                      "value": "{{pagEndIndex}}"
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Inventory retrieved successfully. This could be an empty array.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "[\n {\n  \"quantity\": 4,\n  \"expires\": \"1985-03-15\",\n  \"id\": 101,\n  \"product\": {\n   \"name\": \"Watties Baked Beans - 420g can\",\n   \"id\": \"WATT-420-BEANS\",\n   \"description\": \"Baked Beans as they should be.\",\n   \"manufacturer\": \"Heinz Wattie's Limited\",\n   \"recommendedRetailPrice\": 2.2,\n   \"created\": \"2003-11-17T18:28:55.512Z\",\n   \"images\": [\n    {\n     \"filename\": \"/media/images/23987192387509-123908794328.png\",\n     \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n     \"id\": 1234\n    },\n    {\n     \"filename\": \"/media/images/23987192387509-123908794328.png\",\n     \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n     \"id\": 1234\n    }\n   ]\n  },\n  \"pricePerItem\": 6.5,\n  \"totalPrice\": 21.99,\n  \"manufactured\": \"2005-12-10\",\n  \"sellBy\": \"2000-12-05\",\n  \"bestBefore\": \"1951-12-05\"\n },\n {\n  \"quantity\": 4,\n  \"expires\": \"1971-04-06\",\n  \"id\": 101,\n  \"product\": {\n   \"name\": \"Watties Baked Beans - 420g can\",\n   \"id\": \"WATT-420-BEANS\",\n   \"description\": \"Baked Beans as they should be.\",\n   \"manufacturer\": \"Heinz Wattie's Limited\",\n   \"recommendedRetailPrice\": 2.2,\n   \"created\": \"1944-12-04T15:42:43.894Z\",\n   \"images\": [\n    {\n     \"filename\": \"/media/images/23987192387509-123908794328.png\",\n     \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n     \"id\": 1234\n    },\n    {\n     \"filename\": \"/media/images/23987192387509-123908794328.png\",\n     \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n     \"id\": 1234\n    }\n   ]\n  },\n  \"pricePerItem\": 6.5,\n  \"totalPrice\": 21.99,\n  \"manufactured\": \"2004-08-07\",\n  \"sellBy\": \"1954-10-12\",\n  \"bestBefore\": \"1946-03-26\"\n }\n]"
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The account performing the request is neither an administrator of the business, nor a global application admin.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Add a new inventory item to a business's inventory",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/inventory/",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "inventory",
                    ""
                  ]
                }
              },
              "response": [
                {
                  "name": "Inventory item created successfully",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Created",
                  "code": 201,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n \"inventoryItemId\": 101\n}"
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Forbidden: Returned when a user tries to add an inventory item to the inventory of a business they do not administer AND the user is not a global application admin",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/inventory/",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "inventory",
                        ""
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Modify an existing inventory item",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/inventory/:inventoryItemId",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "inventory",
                    ":inventoryItemId"
                  ],
                  "variable": [
                    {
                      "key": "inventoryItemId",
                      "value": "Duis",
                      "description": "(Required) ID of inventory item to update"
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Inventory item updated successfully",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/inventory/:inventoryItemId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "inventory",
                        ":inventoryItemId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "inventoryItemId"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/inventory/:inventoryItemId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "inventory",
                        ":inventoryItemId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "inventoryItemId"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Forbidden: Returned when a user tries to update an inventory item for a business they do not administer AND the user is not a global application admin",
                  "originalRequest": {
                    "method": "PUT",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"productId\": \"WATT-420-BEANS\",\n    \"quantity\": 4,\n    \"expires\": \"1949-03-05\",\n    \"pricePerItem\": 6.5,\n    \"totalPrice\": 21.99,\n    \"manufactured\": \"1958-03-12\",\n    \"sellBy\": \"1946-10-23\",\n    \"bestBefore\": \"1969-03-05\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:businessId/inventory/:inventoryItemId",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":businessId",
                        "inventory",
                        ":inventoryItemId"
                      ],
                      "variable": [
                        {
                          "key": "businessId"
                        },
                        {
                          "key": "inventoryItemId"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            }
          ]
        },
        {
          "name": "listings",
          "item": [
            {
              "name": "Retrieve a business's listings",
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "exec": [
                      "var index = utils.getTestIndex(pm.environment);  // getting the current index value",
                      "",
                      "// List the possible values to cycle through",
                      "sortByValues = [\"quantity\", \"price\", \"created\", \"closes\"];",
                      "isAscendingValues = [\"yes\", \"no\"];",
                      "pagIndexValues = [[0, \"\"], [0, 1], [2, 5]]  // In (start, end) format where `start` is pagStartIndex",
                      "",
                      "// Set the values as env vars, used as query params",
                      "sortByIndex = (Math.floor(index / 2)) % sortByValues.length;",
                      "isAscendingIndex = index % isAscendingValues.length;",
                      "pagIndexIndex = index % pagIndexValues.length;",
                      "pm.environment.set(\"sortBy\", sortByValues[sortByIndex]);",
                      "pm.environment.set(\"isAscending\", isAscendingValues[isAscendingIndex]);",
                      "pm.environment.set(\"pagStartIndex\", pagIndexValues[pagIndexIndex][0]);",
                      "pm.environment.set(\"pagEndIndex\", pagIndexValues[pagIndexIndex][1]);"
                    ],
                    "type": "text/javascript"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var _ = require('lodash');",
                      "",
                      "var jsonData = pm.response.json();",
                      "",
                      "",
                      "// Test status code",
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "",
                      "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                      "pm.test(\"'totalCount' returns a valid number\", function () {",
                      "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                      "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length-1);",
                      "});",
                      "",
                      "",
                      "// Test the size of results match pagination indexes",
                      "pm.test(\"Pagination indices return valid results\", function () {",
                      "    pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                      "    // If start index is null then simplify it to zero",
                      "    pagStartIndex = !pagStartIndex ? 0 : pagStartIndex;",
                      "    pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                      "    resLength = jsonData.results.length;",
                      "    totalCount = Number(jsonData.totalCount);",
                      "",
                      "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                      "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                      "    } else {",
                      "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                      "    }",
                      "});",
                      "",
                      "",
                      "// Test the response schema is correct",
                      "var schema = {",
                      "    \"properties\": {",
                      "        \"results\": {",
                      "            \"type\": \"array\",",
                      "            \"items\": {",
                      "                \"type\": \"object\"",
                      "            }",
                      "        },",
                      "        \"totalCount\": {",
                      "            \"type\": \"number\"",
                      "        }",
                      "    },",
                      "    \"required\": [\"results\", \"totalCount\"]",
                      "};",
                      "",
                      "pm.test('Response body is in expected schema', function () {",
                      "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                      "});",
                      "",
                      "",
                      "",
                      "// Increment the test index value, used to cycle through query params",
                      "utils.incrementTestIndex(p.environment);",
                      "",
                      "sortBy = pm.environment.get(\"sortBy\");",
                      "// Match the lodash format (asc/desc)",
                      "isAscending = pm.environment.get(\"isAscending\") == \"yes\" ? \"asc\" : \"desc\";",
                      "",
                      "pm.test('Listing ' + sortBy + 's are in ' + isAscending + ' sorted order', () => {",
                      "   // Using the orderBy function from lodash ",
                      "   // Read docs: https://lodash.com/docs/4.17.10#orderBy",
                      "",
                      "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                      "    var expectedSortedOrder = _.orderBy(jsonData.results, [( o ) => { return o[sortBy] || ''}],[isAscending]);",
                      "",
                      "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/listings?sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "listings"
                  ],
                  "query": [
                    {
                      "key": "sortBy",
                      "value": "{{sortBy}}"
                    },
                    {
                      "key": "isAscending",
                      "value": "{{isAscending}}"
                    },
                    {
                      "key": "pagStartIndex",
                      "value": "{{pagStartIndex}}"
                    },
                    {
                      "key": "pagEndIndex",
                      "value": "{{pagEndIndex}}"
                    }
                  ]
                }
              },
              "response": [
                {
                  "name": "Listings retrieved successfully. This could be an empty array.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "[\n {\n  \"quantity\": 3,\n  \"price\": 17.99,\n  \"id\": 57,\n  \"inventoryItem\": {\n   \"quantity\": 4,\n   \"expires\": \"1945-01-21\",\n   \"id\": 101,\n   \"product\": {\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2,\n    \"created\": \"2020-09-07T21:10:56.323Z\",\n    \"images\": [\n     {\n      \"filename\": \"/media/images/23987192387509-123908794328.png\",\n      \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n      \"id\": 1234\n     },\n     {\n      \"filename\": \"/media/images/23987192387509-123908794328.png\",\n      \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n      \"id\": 1234\n     }\n    ]\n   },\n   \"pricePerItem\": 6.5,\n   \"totalPrice\": 21.99,\n   \"manufactured\": \"1948-10-19\",\n   \"sellBy\": \"1945-11-05\",\n   \"bestBefore\": \"1968-06-02\"\n  },\n  \"moreInfo\": \"Seller may be willing to consider near offers\",\n  \"created\": \"2021-07-14T11:44:00Z\",\n  \"closes\": \"2021-07-21T23:59:00Z\"\n },\n {\n  \"quantity\": 3,\n  \"price\": 17.99,\n  \"id\": 57,\n  \"inventoryItem\": {\n   \"quantity\": 4,\n   \"expires\": \"1944-11-20\",\n   \"id\": 101,\n   \"product\": {\n    \"name\": \"Watties Baked Beans - 420g can\",\n    \"id\": \"WATT-420-BEANS\",\n    \"description\": \"Baked Beans as they should be.\",\n    \"manufacturer\": \"Heinz Wattie's Limited\",\n    \"recommendedRetailPrice\": 2.2,\n    \"created\": \"1952-03-12T14:19:29.433Z\",\n    \"images\": [\n     {\n      \"filename\": \"/media/images/23987192387509-123908794328.png\",\n      \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n      \"id\": 1234\n     },\n     {\n      \"filename\": \"/media/images/23987192387509-123908794328.png\",\n      \"thumbnailFilename\": \"/media/images/23987192387509-123908794328_thumbnail.png\",\n      \"id\": 1234\n     }\n    ]\n   },\n   \"pricePerItem\": 6.5,\n   \"totalPrice\": 21.99,\n   \"manufactured\": \"1959-11-04\",\n   \"sellBy\": \"1983-02-15\",\n   \"bestBefore\": \"1976-12-20\"\n  },\n  \"moreInfo\": \"Seller may be willing to consider near offers\",\n  \"created\": \"2021-07-14T11:44:00Z\",\n  \"closes\": \"2021-07-21T23:59:00Z\"\n }\n]"
                },
                {
                  "name": "Access token is missing or invalid",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Unauthorized",
                  "code": 401,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
                  "originalRequest": {
                    "method": "GET",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Not Acceptable",
                  "code": 406,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Add a new listing for some inventory item of a business",
              "request": {
                "auth": {
                  "type": "apikey",
                  "apikey": [
                    {
                      "key": "key",
                      "value": "JSESSIONID",
                      "type": "string"
                    },
                    {
                      "key": "value",
                      "value": true,
                      "type": "boolean"
                    },
                    {
                      "key": "in",
                      "value": "header",
                      "type": "string"
                    }
                  ]
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"inventoryItemId\": 101,\n    \"quantity\": 3,\n    \"price\": 17.99,\n    \"moreInfo\": \"Seller may be willing to consider near offers\",\n    \"closes\": \"2021-07-21T23:59:00Z\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/{{businessId}}/listings",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "{{businessId}}",
                    "listings"
                  ]
                }
              },
              "response": [
                {
                  "name": "Listing created successfully",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"inventoryItemId\": 101,\n    \"quantity\": 3,\n    \"price\": 17.99,\n    \"moreInfo\": \"Seller may be willing to consider near offers\",\n    \"closes\": \"2021-07-21T23:59:00Z\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Created",
                  "code": 201,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n \"listingId\": 57\n}"
                },
                {
                  "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"inventoryItemId\": 101,\n    \"quantity\": 3,\n    \"price\": 17.99,\n    \"moreInfo\": \"Seller may be willing to consider near offers\",\n    \"closes\": \"2021-07-21T23:59:00Z\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Bad Request",
                  "code": 400,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                },
                {
                  "name": "Forbidden: Returned when a user tries to add listing for a business they do not administer AND the user is not a global application admin",
                  "originalRequest": {
                    "method": "POST",
                    "header": [
                      {
                        "description": "Added as a part of security scheme: apikey",
                        "key": "JSESSIONID",
                        "value": "<API Key>"
                      }
                    ],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n    \"inventoryItemId\": 101,\n    \"quantity\": 3,\n    \"price\": 17.99,\n    \"moreInfo\": \"Seller may be willing to consider near offers\",\n    \"closes\": \"2021-07-21T23:59:00Z\"\n}"
                    },
                    "url": {
                      "raw": "{{baseUrl}}/businesses/:id/listings",
                      "host": [
                        "{{baseUrl}}"
                      ],
                      "path": [
                        "businesses",
                        ":id",
                        "listings"
                      ],
                      "variable": [
                        {
                          "key": "id"
                        }
                      ]
                    }
                  },
                  "status": "Forbidden",
                  "code": 403,
                  "_postman_previewlanguage": "text",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "text/plain"
                    }
                  ],
                  "cookie": [],
                  "body": ""
                }
              ]
            },
            {
              "name": "Purchase Listing",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "pm.test(\"Status code is 200\", function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test(\"Your test name\", function () {",
                      "    var jsonData = pm.response.json();",
                      "    pm.expect(jsonData.transactionId).to.be.a(\"number\");",
                      "});"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/businesses/1001/listings/5003/purchase",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    "1001",
                    "listings",
                    "5003",
                    "purchase"
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "Create a new business entity",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = JSON.parse(responseBody);",
                  "postman.setEnvironmentVariable(\"businessId\", jsonData.businessId);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Lumbridge General Store\",\n    \"address\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"businessType\": \"Non-profit organisation\",\n    \"primaryAdministratorId\": 20,\n    \"description\": \"A one-stop shop for all your adventuring needs\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/businesses",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "businesses"
              ]
            }
          },
          "response": [
            {
              "name": "Business account created successfully",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Lumbridge General Store\",\n    \"address\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"businessType\": \"Non-profit organisation\",\n    \"primaryAdministratorId\": 20,\n    \"description\": \"A one-stop shop for all your adventuring needs\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"businessId\": 100\n}"
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Lumbridge General Store\",\n    \"address\": {\n        \"country\": \"New Zealand\",\n        \"streetNumber\": \"3/24\",\n        \"streetName\": \"Ilam Road\",\n        \"suburb\": \"Upper Riccarton\",\n        \"city\": \"Christchurch\",\n        \"region\": \"Canterbury\",\n        \"postcode\": \"90210\"\n    },\n    \"businessType\": \"Non-profit organisation\",\n    \"primaryAdministratorId\": 20,\n    \"description\": \"A one-stop shop for all your adventuring needs\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Retrieve a specific business account",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/businesses/{{businessId}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "businesses",
                "{{businessId}}"
              ]
            }
          },
          "response": [
            {
              "name": "Business retrieved successfully",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"name\": \"Lumbridge General Store\",\n \"address\": {\n  \"country\": \"New Zealand\",\n  \"streetNumber\": \"3/24\",\n  \"streetName\": \"Ilam Road\",\n  \"suburb\": \"Upper Riccarton\",\n  \"city\": \"Christchurch\",\n  \"region\": \"Canterbury\",\n  \"postcode\": \"90210\"\n },\n \"businessType\": \"Charitable organisation\",\n \"id\": 100,\n \"administrators\": [\n  {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"defaultGlobalApplicationAdmin\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"globalApplicationAdmin\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  }\n ],\n \"primaryAdministratorId\": 20,\n \"description\": \"A one-stop shop for all your adventuring needs\",\n \"created\": \"2020-07-14T14:52:00Z\"\n}"
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Add an individual as an administrator for a business",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": 100\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/businesses/{{businessId}}/makeAdministrator",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "businesses",
                "{{businessId}}",
                "makeAdministrator"
              ]
            }
          },
          "response": [
            {
              "name": "Individual added as an administrator successfully",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/makeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "makeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The individual could not be added as an administrator, perhaps because it does not exist or is already an administrator.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/makeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "makeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/makeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "makeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Forbidden: Returned when the user making the request is not the primary administrator of the business AND is not a global application admin.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/makeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "makeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/makeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "makeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Remove an individual from administering a business",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": 100\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/businesses/{{businessId}}/removeAdministrator",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "businesses",
                "{{businessId}}",
                "removeAdministrator"
              ]
            }
          },
          "response": [
            {
              "name": "Inidividual removed from administering successfully",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/removeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "removeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The individual could not be removed from administering the business, perhaps because it does not exist, was not an administrator of the business, or is the primary administrator of the business.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/removeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "removeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/removeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "removeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Forbidden: Returned when the user making the request is not the primary administrator of the business AND is not a global application admin.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/removeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "removeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"userId\": 100\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/businesses/:id/removeAdministrator",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "businesses",
                    ":id",
                    "removeAdministrator"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        }
      ]
    },
    {
      "name": "cards",
      "item": [
        {
          "name": "Create a new card to go on the community marketplace",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"1982 Lada Samara\",\n    \"creatorId\": 100,\n    \"section\": \"ForSale\",\n    \"keywordIds\": [\n        41804565,\n        -30325281\n    ],\n    \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/cards",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards"
              ]
            }
          },
          "response": [
            {
              "name": "Card created successfully",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"1982 Lada Samara\",\n    \"creatorId\": 100,\n    \"section\": \"ForSale\",\n    \"keywordIds\": [\n        85592704,\n        -70116620\n    ],\n    \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/cards",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"cardId\": 500\n}"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"1982 Lada Samara\",\n    \"creatorId\": 100,\n    \"section\": \"ForSale\",\n    \"keywordIds\": [\n        85592704,\n        -70116620\n    ],\n    \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/cards",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"1982 Lada Samara\",\n    \"creatorId\": 100,\n    \"section\": \"ForSale\",\n    \"keywordIds\": [\n        85592704,\n        -70116620\n    ],\n    \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/cards",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Returned if a user who is not a GAA tries to create a card for somebody else.",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"title\": \"1982 Lada Samara\",\n    \"creatorId\": 100,\n    \"section\": \"ForSale\",\n    \"keywordIds\": [\n        85592704,\n        -70116620\n    ],\n    \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/cards",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Retrieve all cards for a given section",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var index = utils.getTestIndex(pm.environment);  // getting the current index value",
                  "",
                  "// List the possible values to cycle through",
                  "sortByValues = [\"title\", \"created\", \"displayPeriodEnd\"];",
                  "isAscendingValues = [\"yes\", \"no\"];",
                  "pagIndexValues = [[0, \"\"], [0, 1], [1, 2]]  // In (start, end) format where `start` is pagStartIndex",
                  "",
                  "// Set the values as env vars, used as query params",
                  "sortByIndex = (Math.floor(index / 2)) % sortByValues.length;",
                  "isAscendingIndex = index % isAscendingValues.length;",
                  "pagIndexIndex = index % pagIndexValues.length;",
                  "pm.environment.set(\"sortBy\", sortByValues[sortByIndex]);",
                  "pm.environment.set(\"isAscending\", isAscendingValues[isAscendingIndex]);",
                  "pm.environment.set(\"pagStartIndex\", pagIndexValues[pagIndexIndex][0]);",
                  "pm.environment.set(\"pagEndIndex\", pagIndexValues[pagIndexIndex][1]);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var _ = require('lodash');",
                  "",
                  "var jsonData = pm.response.json();",
                  "",
                  "",
                  "// Test status code",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "",
                  "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                  "pm.test(\"'totalCount' returns a valid number\", function () {",
                  "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                  "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length-1);",
                  "});",
                  "",
                  "",
                  "// Test the size of results match pagination indexes",
                  "pm.test(\"Pagination indices return valid results\", function () {",
                  "    pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                  "    // If start index is null then simplify it to zero",
                  "    pagStartIndex = !pagStartIndex ? 0 : pagStartIndex;",
                  "    pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                  "    resLength = jsonData.results.length;",
                  "    totalCount = Number(jsonData.totalCount);",
                  "",
                  "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                  "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                  "    } else {",
                  "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                  "    }",
                  "});",
                  "",
                  "",
                  "// Test the response schema is correct",
                  "var schema = {",
                  "    \"properties\": {",
                  "        \"results\": {",
                  "            \"type\": \"array\",",
                  "            \"items\": {",
                  "                \"type\": \"object\"",
                  "            }",
                  "        },",
                  "        \"totalCount\": {",
                  "            \"type\": \"number\"",
                  "        }",
                  "    },",
                  "    \"required\": [\"results\", \"totalCount\"]",
                  "};",
                  "",
                  "pm.test('Response body is in expected schema', function () {",
                  "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                  "});",
                  "",
                  "",
                  "",
                  "// Increment the test index value, used to cycle through query params",
                  "utils.incrementTestIndex(p.environment);",
                  "",
                  "sortBy = pm.environment.get(\"sortBy\");",
                  "// Match the lodash format (asc/desc)",
                  "isAscending = pm.environment.get(\"isAscending\") == \"yes\" ? \"asc\" : \"desc\";",
                  "",
                  "pm.test('Marketplace Card ' + sortBy + 's are in ' + isAscending + ' sorted order', () => {",
                  "   // Using the orderBy function from lodash ",
                  "   // Read docs: https://lodash.com/docs/4.17.10#orderBy",
                  "",
                  "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                  "    var expectedSortedOrder = _.orderBy(jsonData.results, [( o ) => { return o[sortBy] || ''}],[isAscending]);",
                  "",
                  "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cards?section=ForSale&sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards"
              ],
              "query": [
                {
                  "key": "section",
                  "value": "ForSale",
                  "description": "(Required) The section for which cards should be retrieved."
                },
                {
                  "key": "sortBy",
                  "value": "{{sortBy}}"
                },
                {
                  "key": "isAscending",
                  "value": "{{isAscending}}"
                },
                {
                  "key": "pagStartIndex",
                  "value": "{{pagStartIndex}}"
                },
                {
                  "key": "pagEndIndex",
                  "value": "{{pagEndIndex}}"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Request successful, a (possibly empty) list of cards is returned",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards?section=ForSale",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ],
                  "query": [
                    {
                      "key": "section",
                      "value": "ForSale"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"defaultGlobalApplicationAdmin\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n },\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"user\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n }\n]"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards?section=ForSale",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ],
                  "query": [
                    {
                      "key": "section",
                      "value": "ForSale"
                    }
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards?section=ForSale",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards"
                  ],
                  "query": [
                    {
                      "key": "section",
                      "value": "ForSale"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Search for cards based on some keywords",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cards/search?keywordIds=-80125416&keywordIds=-38105008&section=ForSale&union=false",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards",
                "search"
              ],
              "query": [
                {
                  "key": "keywordIds",
                  "value": "-80125416",
                  "description": "(Required) The IDs of keywords by which cards are being searched"
                },
                {
                  "key": "keywordIds",
                  "value": "-38105008",
                  "description": "(Required) The IDs of keywords by which cards are being searched"
                },
                {
                  "key": "section",
                  "value": "ForSale",
                  "description": "(Required) The section for which cards should be retrieved."
                },
                {
                  "key": "union",
                  "value": "false",
                  "description": "(Required) Whether or not to get cards that match ANY of the keywords, or only cards that match ALL of the keywords. True = Match ANY, False = Match ALL"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Request successful, a (possibly empty) list of cards is returned",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/search?keywordIds=-2020432&keywordIds=-43015898&section=ForSale&union=true",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "keywordIds",
                      "value": "-2020432"
                    },
                    {
                      "key": "keywordIds",
                      "value": "-43015898"
                    },
                    {
                      "key": "section",
                      "value": "ForSale"
                    },
                    {
                      "key": "union",
                      "value": "true"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"defaultGlobalApplicationAdmin\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n },\n {\n  \"title\": \"1982 Lada Samara\",\n  \"section\": \"ForSale\",\n  \"id\": 500,\n  \"creator\": {\n   \"firstName\": \"John\",\n   \"lastName\": \"Smith\",\n   \"email\": \"johnsmith99@gmail.com\",\n   \"dateOfBirth\": \"1999-04-27\",\n   \"homeAddress\": {\n    \"country\": \"New Zealand\",\n    \"streetNumber\": \"3/24\",\n    \"streetName\": \"Ilam Road\",\n    \"suburb\": \"Upper Riccarton\",\n    \"city\": \"Christchurch\",\n    \"region\": \"Canterbury\",\n    \"postcode\": \"90210\"\n   },\n   \"id\": 100,\n   \"middleName\": \"Hector\",\n   \"nickname\": \"Jonny\",\n   \"bio\": \"Likes long walks on the beach\",\n   \"phoneNumber\": \"+64 3 555 0129\",\n   \"created\": \"2020-07-14T14:32:00Z\",\n   \"role\": \"user\",\n   \"businessesAdministered\": [\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    },\n    {\n     \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n    }\n   ]\n  },\n  \"created\": \"2021-07-15T05:10:00Z\",\n  \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n  \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n  \"keywords\": [\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   },\n   {\n    \"id\": 600,\n    \"name\": \"Vehicle\",\n    \"created\": \"2021-07-15T05:10:00Z\"\n   }\n  ]\n }\n]"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/search?keywordIds=-2020432&keywordIds=-43015898&section=ForSale&union=true",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "keywordIds",
                      "value": "-2020432"
                    },
                    {
                      "key": "keywordIds",
                      "value": "-43015898"
                    },
                    {
                      "key": "section",
                      "value": "ForSale"
                    },
                    {
                      "key": "union",
                      "value": "true"
                    }
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/search?keywordIds=-2020432&keywordIds=-43015898&section=ForSale&union=true",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "keywordIds",
                      "value": "-2020432"
                    },
                    {
                      "key": "keywordIds",
                      "value": "-43015898"
                    },
                    {
                      "key": "section",
                      "value": "ForSale"
                    },
                    {
                      "key": "union",
                      "value": "true"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Retrieve a specific card",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cards/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "500",
                  "description": "(Required) The id of the card to get."
                }
              ]
            }
          },
          "response": [
            {
              "name": "Request successful, a card is returned.",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"title\": \"1982 Lada Samara\",\n \"section\": \"ForSale\",\n \"id\": 500,\n \"creator\": {\n  \"firstName\": \"John\",\n  \"lastName\": \"Smith\",\n  \"email\": \"johnsmith99@gmail.com\",\n  \"dateOfBirth\": \"1999-04-27\",\n  \"homeAddress\": {\n   \"country\": \"New Zealand\",\n   \"streetNumber\": \"3/24\",\n   \"streetName\": \"Ilam Road\",\n   \"suburb\": \"Upper Riccarton\",\n   \"city\": \"Christchurch\",\n   \"region\": \"Canterbury\",\n   \"postcode\": \"90210\"\n  },\n  \"id\": 100,\n  \"middleName\": \"Hector\",\n  \"nickname\": \"Jonny\",\n  \"bio\": \"Likes long walks on the beach\",\n  \"phoneNumber\": \"+64 3 555 0129\",\n  \"created\": \"2020-07-14T14:32:00Z\",\n  \"role\": \"user\",\n  \"businessesAdministered\": [\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   },\n   {\n    \"value\": \"<Circular reference to #/components/schemas/Business detected>\"\n   }\n  ]\n },\n \"created\": \"2021-07-15T05:10:00Z\",\n \"displayPeriodEnd\": \"2021-07-29T05:10:00Z\",\n \"description\": \"Beige, suitable for a hen house. Fair condition. Some rust. As is, where is. Will swap for budgerigar.\",\n \"keywords\": [\n  {\n   \"id\": 600,\n   \"name\": \"Vehicle\",\n   \"created\": \"2021-07-15T05:10:00Z\"\n  },\n  {\n   \"id\": 600,\n   \"name\": \"Vehicle\",\n   \"created\": \"2021-07-15T05:10:00Z\"\n  }\n ]\n}"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Delete a community marketplace card",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cards/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "500",
                  "description": "(Required) The id of the card to get."
                }
              ]
            }
          },
          "response": [
            {
              "name": "Card deleted successfully",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Forbidden: Returned when a user tries to delete a card that they are not the creator of AND the user is not a GAA",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Extend the display period of a card that is nearing expiry",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cards/:id/extenddisplayperiod",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "cards",
                ":id",
                "extenddisplayperiod"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "500",
                  "description": "(Required) The id of the card to get."
                }
              ]
            }
          },
          "response": [
            {
              "name": "End of display period successfully extended. Extension amount should be a further two weeks.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id/extenddisplayperiod",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id",
                    "extenddisplayperiod"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id/extenddisplayperiod",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id",
                    "extenddisplayperiod"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Forbidden: Returned when a user who is neither the creator of the card, nor a GAA, tries to extend the display period of the card.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id/extenddisplayperiod",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id",
                    "extenddisplayperiod"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "The requested route does exist (so not a 404) but some part of the request is not acceptable, for example trying to access a resource by an ID that does not exist.",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/cards/:id/extenddisplayperiod",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "cards",
                    ":id",
                    "extenddisplayperiod"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Not Acceptable",
              "code": 406,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        }
      ]
    },
    {
      "name": "keywords",
      "item": [
        {
          "name": "Create a new system-wide keyword",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Vehicle\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/keywords",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "keywords"
              ]
            }
          },
          "response": [
            {
              "name": "Keyword created successfully",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Vehicle\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/keywords",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords"
                  ]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n \"keywordId\": 600\n}"
            },
            {
              "name": "There was some error with the data supplied by the user, appropriate error message(s) should be shown to user",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Vehicle\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/keywords",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords"
                  ]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n    \"name\": \"Vehicle\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/keywords",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords"
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Search for keywords by partial (or complete) name",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/keywords/search?searchQuery=Duis",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "keywords",
                "search"
              ],
              "query": [
                {
                  "key": "searchQuery",
                  "value": "Duis",
                  "description": "(Required) Criteria to search keywords for, all partial and complete matches are returned"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Request successful, a (possibly empty) list of keywords is returned",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/keywords/search?searchQuery=Duis",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "searchQuery",
                      "value": "Duis"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n {\n  \"id\": 600,\n  \"name\": \"Vehicle\",\n  \"created\": \"2021-07-15T05:10:00Z\"\n },\n {\n  \"id\": 600,\n  \"name\": \"Vehicle\",\n  \"created\": \"2021-07-15T05:10:00Z\"\n }\n]"
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/keywords/search?searchQuery=Duis",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "searchQuery",
                      "value": "Duis"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        },
        {
          "name": "Delete a keyword as an admin",
          "request": {
            "auth": {
              "type": "apikey",
              "apikey": [
                {
                  "key": "key",
                  "value": "JSESSIONID",
                  "type": "string"
                },
                {
                  "key": "value",
                  "value": true,
                  "type": "boolean"
                },
                {
                  "key": "in",
                  "value": "header",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/keywords/:id",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "keywords",
                ":id"
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "600",
                  "description": "(Required) ID of keyword to delete"
                }
              ]
            }
          },
          "response": [
            {
              "name": "Keyword successfully deleted",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/keywords/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Access token is missing or invalid",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/keywords/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            },
            {
              "name": "Forbidden: Returned if a non-GAA user attempts to delete any card.",
              "originalRequest": {
                "method": "DELETE",
                "header": [
                  {
                    "description": "Added as a part of security scheme: apikey",
                    "key": "JSESSIONID",
                    "value": "<API Key>"
                  }
                ],
                "url": {
                  "raw": "{{baseUrl}}/keywords/:id",
                  "host": [
                    "{{baseUrl}}"
                  ],
                  "path": [
                    "keywords",
                    ":id"
                  ],
                  "variable": [
                    {
                      "key": "id"
                    }
                  ]
                }
              },
              "status": "Forbidden",
              "code": 403,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain"
                }
              ],
              "cookie": [],
              "body": ""
            }
          ]
        }
      ]
    },
    {
      "name": "listings",
      "item": [
        {
          "name": "Search Listings",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const store = pm.environment;",
                  "",
                  "const index = utils.getTestIndex(store);",
                  "",
                  "// Increment the test index value, used to cycle through query params",
                  "utils.incrementTestIndex(store);",
                  "",
                  "",
                  "const setRequestVariables = params => {",
                  "    // params = { paramName: [paramValues]}",
                  "    const cycleLength = Math.max(...Object.values(params).map(arr => arr.length));",
                  "    // If some parameters have more values in the array, other parameters will loop through",
                  "    Object.keys(params).forEach(paramName => {",
                  "        const index = (test % cycleLength) % params[paramName].length;",
                  "        // cycleLength can be greater than length of array, so in this case another modulus operation is needed",
                  "        store.set(paramName, params[paramName][index]);",
                  "    });",
                  "}",
                  "",
                  "// TODO add business name, location etc.?",
                  "// Using utils so it can be used in tests",
                  "utils.listingsSortByKeyPaths = {",
                  "    \"quantity\": obj => obj.quantity,",
                  "    \"price\": obj => obj.price,",
                  "    \"created\": obj => obj.created,",
                  "    \"closes\": obj => obj.closes,",
                  "    \"name\": obj => obj.listing.product.name",
                  "};",
                  "",
                  "setRequestVariables({",
                  "    sortBy       : Object.keys(utils.listingsSortByKeyPaths),",
                  "    isAscending  : [true, false],",
                  "    pagStartIndex: [ 0, 0, 2],",
                  "    pagEndIndex  : [\"\", 1, 5],",
                  "    searchKeys   : [[\"\"]],",
                  "    searchValue  : [\"Pie Palace\"]",
                  "})"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "_ = require('lodash');",
                  "const store = pm.environment;",
                  "",
                  "const jsonData = pm.response.json();",
                  "",
                  "// Test status code",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "",
                  "// Test that totalCount is a Number and is between 0 & the amount of data returned",
                  "pm.test(\"'totalCount' returns a valid number\", function () {",
                  "    pm.expect(jsonData.totalCount).to.satisfy((count) => !isNaN(count));",
                  "    pm.expect(jsonData.totalCount).to.above(jsonData.results.length - 1);",
                  "});",
                  "",
                  "",
                  "// Test the size of results match pagination indexes",
                  "pm.test(\"Pagination indicies return valid results\", function () {",
                  "    let pagStartIndex = pm.environment.get(\"pagStartIndex\");",
                  "    // If start index is null then simplify it to zero",
                  "    if (!pagStartIndex) pagStartIndex = 0;",
                  "    const pagEndIndex = pm.environment.get(\"pagEndIndex\");",
                  "    const resLength = jsonData.results.length;",
                  "    const totalCount = Number(jsonData.totalCount);",
                  "",
                  "    if (!pagEndIndex || pagEndIndex >= totalCount) {",
                  "        pm.expect(resLength).to.eql(totalCount - pagStartIndex);",
                  "    } else {",
                  "        pm.expect(resLength).to.eql(pagEndIndex - pagStartIndex + 1);",
                  "    }",
                  "});",
                  "",
                  "",
                  "// Test the response schema is correct",
                  "// Made using https://app.quicktype.io/#l=schema",
                  "",
                  "// TODO add business to schema; property of listing or product?",
                  "const schema = {",
                  "    \"$ref\": \"#/definitions/Root\",",
                  "    \"definitions\": {",
                  "        \"Root\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"results\": {",
                  "                    \"type\": \"array\",",
                  "                    \"items\": {",
                  "                        \"$ref\": \"#/definitions/Listing\"",
                  "                    }",
                  "                },",
                  "                \"totalCount\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"results\",",
                  "                \"totalCount\"",
                  "            ],",
                  "            \"title\": \"Root\"",
                  "        },",
                  "        \"Listing\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"id\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"inventoryItem\": {",
                  "                    \"$ref\": \"#/definitions/InventoryItem\"",
                  "                },",
                  "                \"quantity\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"price\": {",
                  "                    \"type\": \"number\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"moreInfo\": {",
                  "                    \"anyOf\": [",
                  "                        {",
                  "                            \"type\": \"null\"",
                  "                        },",
                  "                        {",
                  "                            \"type\": \"string\"",
                  "                        }",
                  "                    ]",
                  "                },",
                  "                \"created\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date-time\"",
                  "                },",
                  "                \"closes\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date-time\"",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"closes\",",
                  "                \"created\",",
                  "                \"id\",",
                  "                \"inventoryItem\",",
                  "                \"moreInfo\",",
                  "                \"price\",",
                  "                \"quantity\"",
                  "            ],",
                  "            \"title\": \"Listing\"",
                  "        },",
                  "        \"InventoryItem\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"id\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"product\": {",
                  "                    \"$ref\": \"#/definitions/Product\"",
                  "                },",
                  "                \"quantity\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"pricePerItem\": {",
                  "                    \"type\": \"number\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"totalPrice\": {",
                  "                    \"type\": \"number\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"expires\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date\"",
                  "                },",
                  "                \"manufactured\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date\"",
                  "                },",
                  "                \"sellBy\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date\"",
                  "                },",
                  "                \"bestBefore\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date\"",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"bestBefore\",",
                  "                \"expires\",",
                  "                \"id\",",
                  "                \"manufactured\",",
                  "                \"pricePerItem\",",
                  "                \"product\",",
                  "                \"quantity\",",
                  "                \"sellBy\",",
                  "                \"totalPrice\"",
                  "            ],",
                  "            \"title\": \"InventoryItem\"",
                  "        },",
                  "        \"Product\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"id\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"name\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"description\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"manufacturer\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"recommendedRetailPrice\": {",
                  "                    \"type\": \"number\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"created\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date-time\"",
                  "                },",
                  "                \"images\": {",
                  "                    \"type\": \"array\",",
                  "                    \"items\": {",
                  "                        \"$ref\": \"#/definitions/ProductImage\"",
                  "                    }",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"created\",",
                  "                \"description\",",
                  "                \"id\",",
                  "                \"images\",",
                  "                \"name\",",
                  "                \"recommendedRetailPrice\"",
                  "            ],",
                  "            \"title\": \"Product\"",
                  "        },",
                  "        \"ProductImage\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"id\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"filename\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"thumbnailFilename\": {",
                  "                    \"type\": \"string\"",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"id\",",
                  "                \"filename\",",
                  "                \"thumbnailFilename\"",
                  "            ],",
                  "            \"title\": \"ProductImage\"",
                  "        },",
                  "        \"Business\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"id\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"primaryAdministratorId\": {",
                  "                    \"type\": \"integer\",",
                  "                    \"minimum\": 0",
                  "                },",
                  "                \"name\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"description\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"address\": {",
                  "                    \"$ref\": \"#/definitions/Address\"",
                  "                },",
                  "                \"businessType\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"created\": {",
                  "                    \"type\": \"string\",",
                  "                    \"format\": \"date-time\"",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"address\",",
                  "                \"businessType\",",
                  "                \"created\",",
                  "                \"description\",",
                  "                \"id\",",
                  "                \"name\",",
                  "                \"primaryAdministratorId\"",
                  "            ],",
                  "            \"title\": \"Business\"",
                  "        },",
                  "        \"Address\": {",
                  "            \"type\": \"object\",",
                  "            \"additionalProperties\": false,",
                  "            \"properties\": {",
                  "                \"streetNumber\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"streetName\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"suburb\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"postcode\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"city\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"region\": {",
                  "                    \"type\": \"string\"",
                  "                },",
                  "                \"country\": {",
                  "                    \"type\": \"string\"",
                  "                }",
                  "            },",
                  "            \"required\": [",
                  "                \"country\"",
                  "            ],",
                  "            \"title\": \"Address\"",
                  "        }",
                  "    }",
                  "}",
                  "",
                  "",
                  "pm.test('Response body is in expected schema', function () {",
                  "    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
                  "});",
                  "",
                  "",
                  "",
                  "sortBy = store.get(\"sortBy\");",
                  "// Match the lodash format (asc/desc)",
                  "isAscending = store.get(\"isAscending\")? \"asc\" : \"desc\";",
                  "",
                  "pm.test(`Listing sorted by ${sortBy} in ${isAscending}ending order`, () => {",
                  "   // Using the orderBy function from lodash ",
                  "   // Read docs: https://lodash.com/docs/4.17.10#orderBy    ",
                  "",
                  "    const keyPath = utils.listingsSortByKeyPaths[sortBy];",
                  "",
                  "   // I use `({ sortBy }) => sortBy || ''` so that nulls are ordered last in Ascending order to match the API",
                  "    var expectedSortedOrder = _.orderBy(jsonData.results, [(obj) => { return keyPath(obj) || ''}],[isAscending]);",
                  "",
                  "    pm.expect(jsonData.results).to.eql(expectedSortedOrder);    ",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/listings/search?searchKeys={{searchKeys}}&searchValue={{searchValue}}&sortBy={{sortBy}}&isAscending={{isAscending}}&pagStartIndex={{pagStartIndex}}&pagEndIndex={{pagEndIndex}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "listings",
                "search"
              ],
              "query": [
                {
                  "key": "searchKeys",
                  "value": "{{searchKeys}}"
                },
                {
                  "key": "searchValue",
                  "value": "{{searchValue}}"
                },
                {
                  "key": "sortBy",
                  "value": "{{sortBy}}"
                },
                {
                  "key": "isAscending",
                  "value": "{{isAscending}}"
                },
                {
                  "key": "pagStartIndex",
                  "value": "{{pagStartIndex}}"
                },
                {
                  "key": "pagEndIndex",
                  "value": "{{pagEndIndex}}"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "auth": {
    "type": "apikey",
    "apikey": [
      {
        "key": "key",
        "value": "JSESSIONID",
        "type": "string"
      },
      {
        "key": "value",
        "value": true,
        "type": "boolean"
      },
      {
        "key": "in",
        "value": "header",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "const TEST_INDEX = \"testIndex\";",
          "",
          "const getTestIndex = (store) => {",
          "    const val = Number(store.get(TEST_INDEX));",
          "    if (isNaN(val)) {",
          "        store.set(TEST_INDEX, 0);",
          "        return 0;",
          "    }",
          "",
          "    return val;",
          "}",
          "",
          "const incrementTestIndex = (store, i = 1) => {",
          "    store.set(TEST_INDEX, getTestIndex(store) + i);",
          "}",
          "",
          "utils = {",
          "    getTestIndex,",
          "    incrementTestIndex",
          "}",
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "localhost:9499"
    }
  ]
}
